`script` is a simple script engine written in golang with Lua-like syntax. [Playground](http://play.fweibo.com)

(If you are looking for a Lua 5.2 compatible engine, refer to tag `v0.2`)

## Can & Can't

- You can't create closures (e.g. a function returns/inside a function) inside the script, but you do can return functions to Go callers.
- You can't use `table` but only `array`.
- You can't write variadic functions nor return variable values, but there is another way using `array`: `function foo() return {1,2} end; local {a,b} = foo()`
- You can `return` and `goto` anywhere in the function.
- You can define more than 255 variables in a function (up to ~4000, depending on the number of temporal variables generated by interpreter)
- You can call a function optionally (say `foo` has 26 parameters from `a` to `z`): `foo(a=1, m=2, z=3)`
- You can slice `string`, `array`, `reflect.Slice` and/or `reflect.Array`: `("string")[1:3] == "str"`, `a[1:2]`. Always keep in mind that index starts from 1 and ends inclusively, if you are writing a native function in Go, then index starts at 0 (of course).
- `number` is `int64 + float64` internally, math operations may promote it to `float64` when needed and downgrade it to `int64` when possible

## Run

```golang
program, err := script.LoadString("return 1")
v, err := program.Run() // v == 1
```

### Global Values

```golang
script.AddGlobalValue("G", func() int { return 1 })

program, _ := script.LoadString("return G() + 1")
v, err := program.Run() // v == 2

program, _ = script.LoadString("return G() + 2")
v, err = program.Run() // v == 3

program, _ = script.LoadString("return G + 2", CompileOptions{
	GlobalKeyValues: {
		"G": 10, // override the global 'G'
	},
})
v, err = program.Run() // v == 12
```

## Benchmarks

Refer to [here](https://github.com/coyove/potatolang/blob/master/tests/bench/perf.md).

